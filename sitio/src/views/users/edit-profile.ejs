<%- include('../partials/head.ejs')%>

<body>

  <!-- HEADER -->
  <%- include('../partials/header.ejs')%>
  <!--Bot칩n ir hacia arriba-->
  <button type="button" class="btn btn-warning btn-floating btn-lg" id="btn-back-to-top"><i
      class="fas fa-arrow-up"></i></button>
  <main style="min-height: calc(100vh - 200px);">
    <div class="container-sm" style="margin-top: 150px;">
      <div class="row mt-5 d-flex justify-content-center">
        <div class="col-sm-4 p-5 bg-light shadow rounded">
          <form action="/users/edit-profile/<%= usuario.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="d-flex justify-content-center flex-column  align-items-center">
              <div id="preview" class="rounded-circle w-50">
              <img src="<%=usuario.avatar ? `/img/avatars/${usuario.avatar}` : `/img/avatars/default.png` %> " alt="user-profile-img" >
            </div>
              <p class="text-danger mt-3" id="role-user-profile"><%= usuario.role %></p>
              <input type="file" name="fotoUsuario" id="selectedFile" style="display: none;"  accept=".jpg, .png, .jpeg">
              <input class="mt-5 w-50 btn btn-primary " style="font-size: 1.5rem;" type="button" value="Seleccionar im치gen" onclick="document.getElementById('selectedFile').click();"> 
              <a href="https://www.creartuavatar.com/" target="_blank"><input class="mt-5 w-150 px-5 btn btn-primary " style="font-size: 1.5rem;" type="button"  value="Crea tu avatar" ></a> 
          </div>
          </div>
        <div class="col-sm-6 p-5 bg-light shadow rounded d-flex flex-column ">
          <label for="name-user-profile">Nombre de Usuario</label>
          <input type="text" name="profileUserEditNombre" id="name-user-profile" maxlength="16" value="<%= usuario.nombre%>">
          <small class="alert-danger">
            <%= locals.errores && locals.errores.profileUserEditNombre ? errores.profileUserEditNombre.msg : null %>
          </small>
          <label for="lastname-user-profile">Apellido de Usuario</label>
          <input type="text" name="profileUserEditApellido" id="lastname-user-profile" value="<%= usuario.apellido%>">
          <small class="alert-danger">
            <%= locals.errores && locals.errores.profileUserEditApellido ? errores.profileUserEditApellido.msg : null %>
          </small>
          <label for="email-user-profile">Email de contacto</label>
          <p class="text-danger" id="email-user-profile"><%= usuario.correo  %></p>
          <a href="/users/edit-password" class="btn btn-danger mt-3" style="font-size: 2rem;color: white;">Cambiar contrase침a</a>
          <button type="submit" class="btn btn-primary mt-5" style="font-size: 2rem;" >Guardar cambios</button>
        </div>
        </form>
      </div>
    </div>
  </main>
  <!-- Footer -->
  <div class="footer-fixed-bottom"></div>
  <%- include('../partials/footer.ejs')%>
  <!-- Footer -->

  <!-- SCRIPT -->
  <%- include('../partials/scripts.ejs')%>

  <script>
    document.getElementById("selectedFile").onchange = function(e) {
  // Creamos el objeto de la clase FileReader
  let reader = new FileReader();

  // Leemos el archivo subido y se lo pasamos a nuestro fileReader
  reader.readAsDataURL(e.target.files[0]);

  // Le decimos que cuando este listo ejecute el c칩digo interno
  reader.onload = function(){
    let preview = document.getElementById('preview'),
            image = document.createElement('img');

    image.src = reader.result;

    preview.innerHTML = '';
    preview.append(image);
  };
}
  </script>

</body>

</html>